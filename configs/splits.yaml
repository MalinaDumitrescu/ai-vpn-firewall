seed: 42

# Primary constraint: capture-count split (70/15/15) at CAPTURE level
capture_ratios:
  train: 0.70
  val: 0.15
  test: 0.15

# Secondary objective: approximate TRAINABLE-flow-mass split (soft objective)
# IMPORTANT: In code we optimize trainable mass (min_packets_ok==True), not raw n_flows.
flow_ratios:
  train: 0.70
  val: 0.15
  test: 0.15

# Hard minimum VPN signal for calibration/threshold tuning (TRAINABLE flows)
# Your train scaler fit had 56 trainable VPN in TRAIN, so 120/60 is impossible.
vpn_trainable_flow_min:
  val: 120
  test: 60

# Optional: ensure val/test aren't tiny in total TRAINABLE flow mass.
min_total_flows:
  val_frac: 0.0
  test_frac: 0.0
  val_abs: 0
  test_abs: 0

min_captures_per_class:
  train: 10
  val: 5
  test: 5

giants:
  top_k_per_class: 2

# Guardrails to prevent the failure mode (val/test dominated by a giant)
# NOTE: giant_flow_threshold applies to TRAINABLE mass now.
guardrails:
  keep_giants_in_train: true
  giant_flow_threshold: 900   # vimeo has ~1188 trainable -> this catches that case
  min_vpn_captures:
    val: 5
    test: 5

tolerance:
  abs_flow_ratio: 0.05

outputs:
  train_list: "data/splits/vnat_train_captures.txt"
  val_list: "data/splits/vnat_val_captures.txt"
  test_list: "data/splits/vnat_test_captures.txt"
  manifest: "data/splits/vnat_split_manifest.json"
